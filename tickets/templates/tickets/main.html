<!-- templates/home.html -->
{% extends 'base.html' %}


{% block title %}
Main Posts
{% endblock title %}


{% block content %}

<!-- search bar -->
<br><br>
<div class="container">
    <form class="form-inline" method=POST action="{% url 'user-search' %}">
        {% csrf_token %}
        <input class="form-control mr-sm-2" name="searched" type="search" placeholder="Nom d'utilisateur..." value="{{ request.GET.q }}" aria-label="Search">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Envoyer</button>
    </form>
</div>
<!-- <br>
Searched users:

    
{% if searched %}
    <h1>You Searched for {{searched}}</h1>
{% else %}
    <h1>Sorry! It doesn't work yet... </h1> 
{% endif%} -->


<hr>
<hr>
<br><br>

<!-- User content -->
Les tickets de l'utilisateur et ceux de personnes qu'il suit
<hr>
<div class="container">
    <div class="row">
        <div class="col-2">
            Compte de: {{ profile }}
            <br><br>
            <a href="{% url 'profiles:profile-list-view' %}">
                <button type="button" class="btn btn-primary">People to follow</button>
            </a>
            <br><br>
            Following:
            <ul>
                {% for p in profile.following.all %}
                <li>{{p}}</li>
                {% endfor %}
            </ul>
            <hr>
            Followers: <br>
            <ul>
                {% for follower in user.following.all %}
                <li>{{follower}}</li>
                {% endfor %}
            </ul>
        </div>
        <div class="col-5">
            User Tickets:
            <hr>
            {% for t in tickets %}
                {% if profile == t.author %}
                <b>{{t.author}}</b>
                <br>
                {{t.description}}
                <hr>
                {% endif %}
            {% endfor %}
        </div>
        <div class="col-5">
            Following Tickets:
            <hr>
            {% for t in tickets %}
                {% if profile != t.author %}
                <b>{{t.author}}</b>
                <br>
                {{t.description}}
                <hr>
                {% endif %}
            {% endfor %}
        </div>
    </div>
</div>
{% endblock content %}