<!-- templates/ticket_edit.html -->
{% extends 'base.html' %}


{% load crispy_forms_filters %}


{% block content %}
    
    <!-- TICKET CONTENT -->
    <h1>Modifier Ticket</h1>
    <form action="{% url 'ticket_edit' ticket.pk %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form|crispy }}
        <button class="btn btn-info ml-2" type="submit">Enregistrer</button>
        <a type="btn" href="{% url 'myfeed' %}" class="btn ml-2 btn-outline-danger">Retourner</a>
        <!-- <a type="btn" onClick="javascript:history.go(-1);" class="btn ml-2 btn-outline-danger">Annuler</a> -->
    </form>
    <br>

    <hr>

    
    <!-- UPDATE START HERE -->
    <br>
    {% if ticket.comments.first %}
    <!-- REVIEW FORM -->
    <h5>Modifier votre commentaire!</h5>
        
    <!-- SEE COMMENTS BEFORE UPDATING IT -->
    <p style="margin-bottom:0;">

        <span class="text-muted">Vous avez publi√© une critique</span><br>
    
        <span class="font-weight-bold font-italic">{{ ticket.comments.first.subject }}&nbsp;&nbsp;-&nbsp;&nbsp;</span>
        <span class="fa {% if ticket.comments.first.rating >= 1 %} fa-star {% else %} fa-star-o {% endif%}"></span>
        <span class="fa {% if ticket.comments.first.rating >= 2 %} fa-star {% else %} fa-star-o {% endif%}"></span>
        <span class="fa {% if ticket.comments.first.rating >= 3 %} fa-star {% else %} fa-star-o {% endif%}"></span>
        <span class="fa {% if ticket.comments.first.rating >= 4 %} fa-star {% else %} fa-star-o {% endif%}"></span>
        <span class="fa {% if ticket.comments.first.rating >= 5 %} fa-star {% else %} fa-star-o {% endif%}"></span>
        <br>
        <span class="font-weight-bold font-italic">'{{ ticket.comments.first.review}}'</span>
    </p><br><br>

        <!-- REVIEW SUBMISSION -->
        <form action="{% url 'submit_review' ticket.pk %}" method="POST">
            {% csrf_token %}
            
            <div>
                <label for="ratingtitle">Titre</label>
                <input type="text" class="form-control" name="subject" id="ratingtitle">
                <br>
                <!-- Rating stars -->
                <label>Note</label>
                <br>
                <div class="rate">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="rating" id="inlineRadio1" value="1">
                        <label class="form-check-label" for="inlineRadio1"> - 1</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="rating" id="inlineRadio2" value="2">
                        <label class="form-check-label" for="inlineRadio2"> - 2</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="rating" id="inlineRadio3" value="3">
                        <label class="form-check-label" for="inlineRadio3"> - 3</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="rating" id="inlineRadio4" value="4">
                        <label class="form-check-label" for="inlineRadio4"> - 4</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="rating" id="inlineRadio5" value="5">
                        <label class="form-check-label" for="inlineRadio5"> - 5</label>
                    </div>
                </div>
                
                <!-- REVIEW CONTENT -->
                <br>
                Commentaire
                <textarea name="review" rows="4" class="form-control"></textarea>
                <br>
                        <input type="submit" value="Envoyer" class="btn btn-primary">
                        <a class="btn btn-danger" href="{% url 'feed' %}" role="button">Annuler</a>
                <br>
                <br>
                

            </div>

        </form>
    {% endif %}


{% endblock content %}
